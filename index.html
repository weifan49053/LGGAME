<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>LG 產品配對遊戲</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: url('lg-bg.jpg') no-repeat center center fixed;
      background-size: cover;
      backdrop-filter: blur(10px);
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
      color: #fff;
      text-shadow: 2px 2px 5px #000;
    }

    .container {
      display: flex;
      justify-content: space-around;
      gap: 20px;
      flex-wrap: wrap;
      margin-top: 30px;
    }

    .customer {
      width: 30%;
      min-width: 280px;
      background-color: rgba(255,255,255,0.9);
      border: 2px dashed #444;
      border-radius: 12px;
      padding: 15px;
      text-align: center;
    }

    .dropzone {
      min-height: 100px;
      margin-top: 10px;
      padding: 10px;
      background-color: #f7f7f7;
      border: 1px solid #ccc;
      border-radius: 8px;
    }

    .card-pool {
      text-align: center;
      margin-top: 40px;
    }

    .card {
      display: inline-block;
      background-color: #e0f7fa;
      color: #004d40;
      padding: 10px 16px;
      margin: 10px;
      border-radius: 8px;
      cursor: grab;
      border: 2px solid #00796b;
      transition: transform 0.2s;
    }

    .card.correct {
      background-color: #c8e6c9;
      border-color: #2e7d32;
    }

    .card.incorrect {
      background-color: #ffcdd2;
      border-color: #c62828;
    }

    .result {
      text-align: center;
      margin-top: 30px;
      font-weight: bold;
      color: #fff;
    }

    button {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #00796b;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>LG 產品配對挑戰</h1>
  <div class="container">
    <div class="customer" ondrop="drop(event)" ondragover="allowDrop(event)" data-answer="AI影像pro,AI聲音pro,alpha影音處理晶片">
      <h3>🎬 顧客A：我平常喜歡追劇看電影，希望畫面漂亮 聲音有臨場感。</h3>
      <div class="dropzone"></div>
    </div>
    <div class="customer" ondrop="drop(event)" ondragover="allowDrop(event)" data-answer="AI智慧滑鼠遙控器,智慧語音搜尋功能">
      <h3>📺 顧客B：沒有用過智慧電視，怕操作很困難。</h3>
      <div class="dropzone"></div>
    </div>
    <div class="customer" ondrop="drop(event)" ondragover="allowDrop(event)" data-answer="零間隙壁掛,真無線影音傳輸技術">
      <h3>🖼️ 顧客C：重視家裡的裝潢風格，想找壁掛安裝有質感的電視。</h3>
      <div class="dropzone"></div>
    </div>
  </div>

  <div class="card-pool" id="card-pool">
    <!-- 卡片將由 JavaScript 動態生成 -->
  </div>

  <div class="result" id="result"></div>
  <div style="text-align:center;">
    <button onclick="submitGame()">✅ 送出答案</button>
  </div>

  <script>
    const allCards = [
      "AI影像pro",
      "AI聲音pro",
      "alpha影音處理晶片",
      "AI智慧滑鼠遙控器",
      "智慧語音搜尋功能",
      "零間隙壁掛",
      "真無線影音傳輸技術"
    ];

    // 洗牌函式
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function initCards() {
      const pool = document.getElementById("card-pool");
      pool.innerHTML = '';
      const shuffled = shuffle([...allCards]);
      shuffled.forEach(text => {
        const card = document.createElement("div");
        card.className = "card";
        card.textContent = text;
        card.draggable = true;
        card.ondragstart = drag;
        pool.appendChild(card);
      });
    }

    function allowDrop(ev) {
      ev.preventDefault();
    }

    function drag(ev) {
      ev.dataTransfer.setData("text", ev.target.textContent);
    }

    function drop(ev) {
      ev.preventDefault();
      const data = ev.dataTransfer.getData("text");
      const targetZone = ev.target.closest(".dropzone");
      const already = [...targetZone.querySelectorAll(".card")].some(c => c.textContent === data);
      if (already) return;

      const poolCard = [...document.querySelectorAll("#card-pool .card")].find(c => c.textContent === data);
      if (poolCard) {
        const clone = poolCard.cloneNode(true);
        clone.classList.remove("dragging");
        clone.draggable = false;
        targetZone.appendChild(clone);
        poolCard.remove();
      }
    }

    function submitGame() {
      const poolLeft = document.querySelectorAll("#card-pool .card").length;
      if (poolLeft > 0) {
        alert("請先將所有卡片放入顧客框中！");
        return;
      }

      let allCorrect = true;

      document.querySelectorAll(".customer").forEach(customer => {
        const expected = customer.getAttribute("data-answer").split(",");
        const zoneCards = [...customer.querySelectorAll(".dropzone .card")];
        zoneCards.forEach(card => {
          if (expected.includes(card.textContent)) {
            card.classList.add("correct");
          } else {
            card.classList.add("incorrect");
            allCorrect = false;
          }
        });
      });

      setTimeout(() => {
        if (allCorrect) {
          alert("🎉 超厲害，全部答對！");
        } else {
          const retry = confirm("❌ 答錯了，請重新作答！\n是否重新開始？");
          if (retry) location.reload();
        }
      }, 300);
    }

    // 初始化卡片
    initCards();
  </script>
</body>
</html>
